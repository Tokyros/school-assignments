(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,n){e.exports=n(63)},38:function(e,t,n){},39:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(28),o=n.n(r),u=(n(38),n(7)),l=(n(39),n(29)),i=n(1),s=function(e){Object(l.a)(e);var t=a.useState(""),n=Object(u.a)(t,2),c=n[0],r=n[1],o=a.useState(""),s=Object(u.a)(o,2),m=s[0],f=s[1],p=a.useContext(C),d=Object(i.g)(),h=function(){d.push("/feed")};a.useEffect((function(){p.auth.checkLogin().then(h)}),[]);return a.createElement("div",{className:"login-page"},a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.auth.login({email:c,password:m}).then(h)}},a.createElement("label",{htmlFor:"user-email"},"Username"),a.createElement("input",{autoComplete:"email",name:"user-email",type:"email",value:c,onChange:function(e){return r(e.target.value)}}),a.createElement("label",{htmlFor:"password"},"Password"),a.createElement("input",{autoComplete:"current-password",name:"password",type:"password",value:m,onChange:function(e){return f(e.target.value)}}),a.createElement("input",{type:"submit"})),a.createElement("button",{onClick:function(){p.auth.signup({email:c,password:m})}},"first time? signup!"))},m=n(12),f=n(11),p=n.n(f),d="".concat("http://localhost","/api");p.a.defaults.withCredentials=!0;var h=function(e){var t="".concat(d,"/auth"),n="".concat(d,"/feed");return{auth:{login:function(n){return e.post("".concat(t,"/login"),n)},signup:function(n){return e.post("".concat(t,"/signup"),n)},logout:function(){return e.get("".concat(t,"/logout"))},checkLogin:function(){return e.get("".concat("http://localhost","/users"),{withCredentials:!0})}},feed:{getAllPosts:function(){return e.get("".concat(n,"/all")).then((function(e){return e.data.posts}))},addPost:function(t){return e.post("".concat(n,"/add"),t).then((function(e){return e.data}))}}}},E=n(32),g=n(17),v=n.n(g),b=n(31),w=function(){var e=a.useState([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=a.useState(!1),o=Object(u.a)(r,2),l=o[0],s=o[1],m=a.useState(""),f=Object(u.a)(m,2),p=f[0],d=f[1],h=a.useContext(C),g=Object(i.g)();a.useEffect((function(){h.auth.checkLogin().then(Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.feed.getAllPosts();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).catch((function(){g.push("/")}))}),[]);var w=l&&a.createElement("div",null,a.createElement("input",{type:"text",value:p,onChange:function(e){return d(e.target.value)}}),a.createElement("button",{onClick:function(){h.feed.addPost({postContent:p}).then((function(e){c([].concat(Object(E.a)(n),[e]))}))}},"SUBMIT"));return a.createElement("div",null,a.createElement("div",{className:"header"},a.createElement("button",null,"SEARCH"),a.createElement("button",{onClick:function(){return s(!0)}},"NEW POST")),a.createElement("div",{className:"posts-list"},n.map((function(e){return a.createElement("div",null,e.content)}))),w)},C=Object(a.createContext)(h(p.a)),O=Object(a.createContext)({setUser:function(){return null}});function j(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/feed"},c.a.createElement(w,null)),c.a.createElement(i.b,{path:"/",exact:!0,ren:!0},c.a.createElement(s,null)),c.a.createElement(i.a,{to:"/"})))}var k=function(){var e=c.a.useState(),t=Object(u.a)(e,2),n=t[0],a=t[1],r=c.a.useRef(h(p.a));return c.a.createElement(m.a,null,c.a.createElement(O.Provider,{value:{user:n,setUser:a}},c.a.createElement(C.Provider,{value:r.current},c.a.createElement(j,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d125e0bd.chunk.js.map